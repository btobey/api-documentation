<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Authorization Code &mdash; Carvoyant API 1.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="Carvoyant API 1.0 documentation" href="../index.html" />
    <link rel="up" title="OAuth2 / Delegated Access" href="oauth2-delegated-access.html" />
    <link rel="next" title="Implicit" href="oauth-example-implicit.html" />
    <link rel="prev" title="OAuth2 / Delegated Access" href="oauth2-delegated-access.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="oauth-example-implicit.html" title="Implicit"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="oauth2-delegated-access.html" title="OAuth2 / Delegated Access"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Carvoyant API 1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >Getting Started</a> &raquo;</li>
          <li><a href="oauth2-delegated-access.html" accesskey="U">OAuth2 / Delegated Access</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="authorization-code">
<h1>Authorization Code<a class="headerlink" href="#authorization-code" title="Permalink to this headline">Â¶</a></h1>
<p>The first step is to request the authorization from the user. This call will return a redirect to the login page.</p>
<p><em>Authorize Request</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>curl -i -X GET -d &quot;client_id=pekfaf6jxk6suyXXXXXXXXXX&quot; --data-urlencode &quot;redirect_uri=http://test.carvoyant.com/&quot; -d &quot;response_type=code&quot; &quot;https://auth.carvoyant.com/OAuth/authorize&quot;

HTTP/1.1 302 Found
Content-Type: text/plain; charset=UTF-8
Date: Mon, 28 Apr 2014 14:03:51 GMT
Location: https://auth.carvoyant.com/login/auth
Server: Apache-Coyote/1.1
Set-Cookie: JSESSIONID=2D3C7E5AA412DF98124B8AC7121FEF7D; Path=/; Secure; HttpOnly
Content-Length: 0
Connection: keep-alive
</pre></div>
</div>
<p>If you did this through a browser, the login screen would appear to the user:</p>
<img alt="../_images/auth-dialog.png" src="../_images/auth-dialog.png" />
<p>After logging in, the user will be redirected to the redirect_url specified in the authorization request with the authorization code appended to it.  For the request above, the redirect uri would look like::</p>
<div class="highlight-python"><div class="highlight"><pre>http://test.carvoyant.com/?code=v369uars628mgkXXXXXXXXXX
</pre></div>
</div>
<p>From this response, the server running at test.carvoyant.com would parse the authorization code and make a request to the token endpoint to read an actual access token.  Note that this request requires the client id and secret key for the development partner to be passed as the Basic Authentication credentials.</p>
<p><em>Access Token Request</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>curl -i --user pekfaf6jxk6suyXXXXXXXXXX:XXXXXXXXXX -d &quot;grant_type=authorization_code&quot; -d &quot;code=v369uars628mgkXXXXXXXXXX&quot; --data-urlencode &quot;redirect_uri=http://test.carvoyant.com/&quot; &quot;https://api.carvoyant.com/oauth/token&quot;
</pre></div>
</div>
<p>The response will include a json body with the access token information.</p>
<p><em>Access Token Response</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>HTTP/1.1 200 OK
Cache-Control: no-store
Content-Type: application/json;charset=UTF-8
Date: Mon, 28 Apr 2014 14:24:34 GMT
Server: Mashery Proxy
X-Mashery-Responder: prod-j-worker-us-east-1c-31.mashery.com
Content-Length: 161
Connection: keep-alive
{
    &quot;token_type&quot;:&quot;bearer&quot;,
    &quot;mapi&quot;:&quot;pekfaf6jxk6suyXXXXXXXXXX&quot;,
    &quot;access_token&quot;:&quot;dmnda67wbdnyayXXXXXXXXXX&quot;,
    &quot;expires_in&quot;:86400,
    &quot;refresh_token&quot;:&quot;f2hqes6fpg37d2XXXXXXXXXX&quot;
}
</pre></div>
</div>
<p>At this point, the development partners system would store the access token and refresh token and use them for future requests.</p>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/carvoyant-logo.png" alt="Logo"/>
            </a></p>
  <h4>Previous topic</h4>
  <p class="topless"><a href="oauth2-delegated-access.html"
                        title="previous chapter">OAuth2 / Delegated Access</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="oauth-example-implicit.html"
                        title="next chapter">Implicit</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/getting-started/oauth-example-authcode.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="oauth-example-implicit.html" title="Implicit"
             >next</a> |</li>
        <li class="right" >
          <a href="oauth2-delegated-access.html" title="OAuth2 / Delegated Access"
             >previous</a> |</li>
        <li><a href="../index.html">Carvoyant API 1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >Getting Started</a> &raquo;</li>
          <li><a href="oauth2-delegated-access.html" >OAuth2 / Delegated Access</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Matt Galvin, Ronnie Williams.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>